{
  "id": "toolset.calendar_assistant.v1",
  "tools": {
    "find_available_slots": {
      "description": "Find free time slots for a set of attendees within a date range. Returns slots where all or some attendees are available.",
      "parameters": {
        "attendees": {
          "type": "array",
          "description": "Array of attendee email addresses",
          "items": { "type": "string" },
          "required": true
        },
        "start_date": {
          "type": "string",
          "description": "ISO date to start search (inclusive)",
          "required": true
        },
        "end_date": {
          "type": "string",
          "description": "ISO date to end search (inclusive)",
          "required": true
        },
        "duration_minutes": {
          "type": "integer",
          "description": "Required meeting duration in minutes",
          "required": true
        },
        "required_attendees": {
          "type": "string",
          "description": "Whether all attendees must be available ('all') or any attendee ('any')",
          "required": false
        },
        "exclude_times": {
          "type": "array",
          "description": "Time ranges to exclude (e.g., lunch hours)",
          "items": {
            "type": "object",
            "properties": {
              "start": { "type": "string", "description": "ISO time" },
              "end": { "type": "string", "description": "ISO time" }
            }
          },
          "required": false
        },
        "exclude_event_ids": {
          "type": "array",
          "description": "Event IDs to exclude from conflict checking (e.g., when rescheduling)",
          "items": { "type": "string" },
          "required": false
        }
      },
      "returns": {
        "type": "array",
        "description": "List of available time slots",
        "items": {
          "type": "object",
          "properties": {
            "start_time": { "type": "string", "description": "ISO datetime" },
            "end_time": { "type": "string", "description": "ISO datetime" },
            "all_attendees_available": { "type": "boolean" },
            "partially_available_attendees": {
              "type": "array",
              "items": { "type": "string", "description": "Email addresses" }
            }
          },
          "required": ["start_time", "end_time", "all_attendees_available"]
        }
      }
    },
    "check_conflicts": {
      "description": "Check if a specific time slot has conflicts with existing meetings for the given attendees.",
      "parameters": {
        "attendees": {
          "type": "array",
          "description": "Array of attendee email addresses",
          "items": { "type": "string" },
          "required": true
        },
        "start_time": {
          "type": "string",
          "description": "ISO datetime for meeting start",
          "required": true
        },
        "end_time": {
          "type": "string",
          "description": "ISO datetime for meeting end",
          "required": true
        },
        "exclude_event_id": {
          "type": "string",
          "description": "Event ID to exclude from conflict checking (e.g., when rescheduling)",
          "required": false
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "has_conflicts": { "type": "boolean" },
          "all_available": { "type": "boolean" },
          "conflicts": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "event_id": { "type": "string" },
                "title": { "type": "string" },
                "start_time": { "type": "string" },
                "end_time": { "type": "string" },
                "conflicting_attendees": {
                  "type": "array",
                  "items": { "type": "string" }
                }
              },
              "required": ["event_id", "title", "start_time", "end_time"]
            }
          }
        },
        "required": ["has_conflicts", "all_available"]
      }
    },
    "create_meeting": {
      "description": "Create a new calendar event and send invitations to attendees.",
      "parameters": {
        "title": {
          "type": "string",
          "description": "Meeting title",
          "required": true
        },
        "start_time": {
          "type": "string",
          "description": "ISO datetime for meeting start",
          "required": true
        },
        "end_time": {
          "type": "string",
          "description": "ISO datetime for meeting end",
          "required": true
        },
        "attendees": {
          "type": "array",
          "description": "Array of attendee email addresses",
          "items": { "type": "string" },
          "required": true
        },
        "location": {
          "type": "string",
          "description": "Meeting location (physical address, room name, or video link)",
          "required": false
        },
        "description": {
          "type": "string",
          "description": "Meeting description or agenda",
          "required": false
        },
        "send_invites": {
          "type": "boolean",
          "description": "Whether to send calendar invitations (default: true)",
          "required": false
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "event_id": { "type": "string" },
          "meeting_link": { "type": "string", "description": "Video conference link if applicable" },
          "invite_status": {
            "type": "string",
            "description": "sent, pending, or failed"
          }
        },
        "required": ["event_id"]
      }
    },
    "update_meeting": {
      "description": "Update an existing meeting's time, location, or other details. Notifies attendees of changes.",
      "parameters": {
        "event_id": {
          "type": "string",
          "description": "Event identifier",
          "required": true
        },
        "start_time": {
          "type": "string",
          "description": "New ISO datetime for meeting start",
          "required": false
        },
        "end_time": {
          "type": "string",
          "description": "New ISO datetime for meeting end",
          "required": false
        },
        "location": {
          "type": "string",
          "description": "New meeting location",
          "required": false
        },
        "title": {
          "type": "string",
          "description": "New meeting title",
          "required": false
        },
        "description": {
          "type": "string",
          "description": "New meeting description",
          "required": false
        },
        "notify_attendees": {
          "type": "boolean",
          "description": "Whether to notify attendees of changes (default: true)",
          "required": false
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "updated_event_id": { "type": "string" },
          "notification_status": {
            "type": "string",
            "description": "notified, pending, or failed"
          }
        },
        "required": ["success"]
      }
    },
    "find_meeting": {
      "description": "Locate an existing meeting by title, date, attendees, or event ID. Returns matching meetings.",
      "parameters": {
        "meeting_title": {
          "type": "string",
          "description": "Partial or full meeting title to search",
          "required": false
        },
        "start_date": {
          "type": "string",
          "description": "ISO date to search around",
          "required": false
        },
        "attendees": {
          "type": "array",
          "description": "Array of attendee email addresses",
          "items": { "type": "string" },
          "required": false
        },
        "event_id": {
          "type": "string",
          "description": "Exact event identifier",
          "required": false
        }
      },
      "returns": {
        "type": "array",
        "description": "List of matching meetings",
        "items": {
          "type": "object",
          "properties": {
            "event_id": { "type": "string" },
            "title": { "type": "string" },
            "start_time": { "type": "string", "description": "ISO datetime" },
            "end_time": { "type": "string", "description": "ISO datetime" },
            "attendees": {
              "type": "array",
              "items": { "type": "string" }
            },
            "location": { "type": "string" },
            "description": { "type": "string" },
            "organizer": { "type": "string", "description": "Email of meeting organizer" }
          },
          "required": ["event_id", "title", "start_time", "end_time"]
        }
      }
    },
    "get_meeting_details": {
      "description": "Get full details of a specific meeting by event ID.",
      "parameters": {
        "event_id": {
          "type": "string",
          "description": "Event identifier",
          "required": true
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "event_id": { "type": "string" },
          "title": { "type": "string" },
          "start_time": { "type": "string", "description": "ISO datetime" },
          "end_time": { "type": "string", "description": "ISO datetime" },
          "attendees": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "email": { "type": "string" },
                "response_status": {
                  "type": "string",
                  "description": "accepted, declined, tentative, or no_response"
                }
              },
              "required": ["email"]
            }
          },
          "location": { "type": "string" },
          "description": { "type": "string" },
          "organizer": { "type": "string" },
          "recurrence_pattern": {
            "type": "string",
            "description": "RRULE if recurring, null otherwise"
          },
          "series_id": {
            "type": "string",
            "description": "Series identifier if part of recurring meeting"
          }
        },
        "required": ["event_id", "title", "start_time", "end_time"]
      }
    },
    "cancel_meeting": {
      "description": "Cancel an existing meeting and optionally notify attendees.",
      "parameters": {
        "event_id": {
          "type": "string",
          "description": "Event identifier",
          "required": true
        },
        "notify_attendees": {
          "type": "boolean",
          "description": "Whether to notify attendees (default: true)",
          "required": false
        },
        "reason": {
          "type": "string",
          "description": "Reason for cancellation",
          "required": false
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "cancellation_status": {
            "type": "string",
            "description": "cancelled, notified, or failed"
          }
        },
        "required": ["success"]
      }
    },
    "find_available_recurring_slots": {
      "description": "Find time slots that work for a recurring meeting pattern. Checks availability across multiple occurrences.",
      "parameters": {
        "attendees": {
          "type": "array",
          "description": "Array of attendee email addresses (typically 2 for 1-on-1)",
          "items": { "type": "string" },
          "required": true
        },
        "frequency": {
          "type": "string",
          "description": "daily, weekly, biweekly, or monthly",
          "required": true
        },
        "day_of_week": {
          "type": "string",
          "description": "Day of week (Monday, Tuesday, etc.) for weekly/biweekly patterns",
          "required": false
        },
        "time_preference": {
          "type": "string",
          "description": "morning, afternoon, evening, or specific ISO time",
          "required": false
        },
        "duration_minutes": {
          "type": "integer",
          "description": "Meeting duration in minutes",
          "required": true
        },
        "start_date": {
          "type": "string",
          "description": "ISO date to start recurring series",
          "required": true
        },
        "end_date": {
          "type": "string",
          "description": "ISO date to end recurring series (optional if num_occurrences provided)",
          "required": false
        },
        "num_occurrences": {
          "type": "integer",
          "description": "Number of occurrences (optional if end_date provided)",
          "required": false
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "suggested_slots": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "start_time": { "type": "string", "description": "ISO datetime for first occurrence" },
                "recurrence_pattern": { "type": "string", "description": "RRULE string" },
                "conflicts": {
                  "type": "array",
                  "description": "Dates with conflicts",
                  "items": {
                    "type": "object",
                    "properties": {
                      "date": { "type": "string", "description": "ISO date" },
                      "conflicting_events": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "event_id": { "type": "string" },
                            "title": { "type": "string" }
                          }
                        }
                      }
                    }
                  }
                },
                "all_occurrences_available": { "type": "boolean" }
              },
              "required": ["start_time", "recurrence_pattern"]
            }
          }
        },
        "required": ["suggested_slots"]
      }
    },
    "check_recurring_conflicts": {
      "description": "Check if a recurring meeting pattern has conflicts with existing meetings across all occurrences.",
      "parameters": {
        "attendees": {
          "type": "array",
          "description": "Array of attendee email addresses",
          "items": { "type": "string" },
          "required": true
        },
        "start_time": {
          "type": "string",
          "description": "ISO datetime for first occurrence",
          "required": true
        },
        "recurrence_pattern": {
          "type": "string",
          "description": "RRULE string or frequency object",
          "required": true
        },
        "end_date": {
          "type": "string",
          "description": "ISO date to end recurring series",
          "required": false
        },
        "num_occurrences": {
          "type": "integer",
          "description": "Number of occurrences",
          "required": false
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "has_conflicts": { "type": "boolean" },
          "conflicts_by_date": {
            "type": "object",
            "description": "Map of ISO date -> array of conflicting events",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "event_id": { "type": "string" },
                  "title": { "type": "string" },
                  "start_time": { "type": "string" },
                  "end_time": { "type": "string" }
                }
              }
            }
          },
          "all_available_dates": {
            "type": "array",
            "items": { "type": "string", "description": "ISO dates" }
          }
        },
        "required": ["has_conflicts"]
      }
    },
    "create_recurring_meeting": {
      "description": "Create a recurring meeting series (e.g., weekly 1-on-1). Creates multiple calendar events following the recurrence pattern.",
      "parameters": {
        "title": {
          "type": "string",
          "description": "Meeting title",
          "required": true
        },
        "start_time": {
          "type": "string",
          "description": "ISO datetime for first occurrence",
          "required": true
        },
        "end_time": {
          "type": "string",
          "description": "ISO datetime for first occurrence end",
          "required": true
        },
        "attendees": {
          "type": "array",
          "description": "Array of attendee email addresses (typically 2 for 1-on-1)",
          "items": { "type": "string" },
          "required": true
        },
        "frequency": {
          "type": "string",
          "description": "daily, weekly, biweekly, or monthly",
          "required": true
        },
        "recurrence_end": {
          "type": "string",
          "description": "ISO date to end series, or number of occurrences as string",
          "required": true
        },
        "location": {
          "type": "string",
          "description": "Meeting location",
          "required": false
        },
        "description": {
          "type": "string",
          "description": "Meeting description",
          "required": false
        },
        "send_invites": {
          "type": "boolean",
          "description": "Whether to send calendar invitations (default: true)",
          "required": false
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "series_id": { "type": "string" },
          "event_ids": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Array of created event IDs"
          },
          "recurrence_pattern": { "type": "string", "description": "RRULE string" },
          "meeting_link": { "type": "string", "description": "Video conference link if applicable" }
        },
        "required": ["series_id", "event_ids"]
      }
    },
    "check_weather_forecast": {
      "description": "Get weather forecast for a specific date and location. Used for outdoor events to assess suitability.",
      "parameters": {
        "date": {
          "type": "string",
          "description": "ISO date for forecast",
          "required": true
        },
        "location": {
          "type": "string",
          "description": "Address, city name, or coordinates",
          "required": true
        },
        "event_type": {
          "type": "string",
          "description": "Type of outdoor event (workshop, picnic, field_trip, etc.)",
          "required": false
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "date": { "type": "string", "description": "ISO date" },
          "location": { "type": "string" },
          "temperature": { "type": "number", "description": "Temperature in Fahrenheit" },
          "conditions": {
            "type": "string",
            "description": "sunny, partly_cloudy, cloudy, rainy, stormy"
          },
          "chance_of_rain": { "type": "number", "description": "Percentage 0-100" },
          "wind_speed": { "type": "number", "description": "Wind speed in mph" },
          "recommendation": {
            "type": "string",
            "description": "suitable, risky, or not_recommended"
          },
          "notes": {
            "type": "string",
            "description": "Additional weather-related notes"
          }
        },
        "required": ["date", "location", "temperature", "conditions", "recommendation"]
      }
    },
    "suggest_alternative_dates": {
      "description": "Suggest alternative dates with better weather conditions for an outdoor event.",
      "parameters": {
        "preferred_date_range": {
          "type": "object",
          "description": "Date range to search within",
          "properties": {
            "start_date": { "type": "string", "description": "ISO date" },
            "end_date": { "type": "string", "description": "ISO date" }
          },
          "required": true
        },
        "location": {
          "type": "string",
          "description": "Address, city name, or coordinates",
          "required": true
        },
        "event_type": {
          "type": "string",
          "description": "Type of outdoor event",
          "required": false
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "suggested_dates": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "date": { "type": "string", "description": "ISO date" },
                "temperature": { "type": "number" },
                "conditions": { "type": "string" },
                "chance_of_rain": { "type": "number" },
                "recommendation": { "type": "string" }
              },
              "required": ["date", "recommendation"]
            }
          }
        },
        "required": ["suggested_dates"]
      }
    },
    "get_attendee_availability": {
      "description": "Get detailed availability information for specific attendees within a date range. Returns busy slots for manual inspection.",
      "parameters": {
        "attendees": {
          "type": "array",
          "description": "Array of attendee email addresses",
          "items": { "type": "string" },
          "required": true
        },
        "start_date": {
          "type": "string",
          "description": "ISO date to start search (inclusive)",
          "required": true
        },
        "end_date": {
          "type": "string",
          "description": "ISO date to end search (inclusive)",
          "required": true
        }
      },
      "returns": {
        "type": "object",
        "properties": {
          "availability_map": {
            "type": "object",
            "description": "Map of attendee email -> array of busy slots",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "event_id": { "type": "string" },
                  "title": { "type": "string" },
                  "start_time": { "type": "string", "description": "ISO datetime" },
                  "end_time": { "type": "string", "description": "ISO datetime" }
                },
                "required": ["start_time", "end_time"]
              }
            }
          }
        },
        "required": ["availability_map"]
      }
    }
  }
}

